<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Page</title>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <script data-main = "scripts/main" src = "/save.js" type="module"></script>
</head>
<link rel="stylesheet" href="contactpagestyle.css">
<body>
    <header>
        <a href="homepage.html">
            <img id="home_button" src="huskyschedulerlogo.jpg" alt="image of Husky Scheduler">
        </a>
    </header>
    <div class="container feedback-form" id="container feedback-form">
        <!--
        <div class="feedback-imge">
            <img src="huskyschedulerlogo.jpg" alt="">
        </div>
        -->
        
        <form method="POST">
            <h3>Drop us your feedback</h3>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <input type="text" id="userName" class="form-control" placeholder="Name">
                    </div>

                    <div class="form-group">
                        <input type="text" id="email" class="form-control" placeholder="Email">
                    </div>

                    <div class="form-group">
                        <p>How would you rate your experience from 1 to 5?</p>
                        1<input type="radio" id="A">
                        2<input type="radio" id="B">
                        3<input type="radio" id="C">
                        4<input type="radio" id="D">
                        5<input type="radio" id="E">
                    </div>
                    <!-- 
                        * Fix the dynamic text box, the user should not be able to manipulate the size of the box
                        * Fix text alignment, the test appears in the middle of the textbox not the front
                        * Once user hits sumbit, needs some kind of thank you/signification that the form submitted successfully
                     -->
                    <textarea name="txtMsg" id="feedback" class="form-control" placeholder="" style="width: 600px; 
                    height: 150px; margin-bottom: 8px; vertical-align: top; padding: 10px;"></textarea>
                    <div class="form-group">
                        <button type="submit" class="btnFeedback" id="submitIt" onclick="openPopup(); addBackgroundBlur()">Submit</button>
                    </div>
                </div>
                
            </div>
        </form>
    </div>

    <div class = "popup" id="popup">
        <img src="tick.png">
        <h2>Thank You!</h2>
        <p>Your feedback has been successfully submitted.</p>
        <button type="button" onclick="closePopup(); removeBackgroundBlur()">OK</button>
    </div>

    <script>
        let popup = document.getElementById("popup");

        function openPopup() {
            popup.classList.add("open-popup");
            event.preventDefault();
        }
        function closePopup() {
            popup.classList.remove("open-popup");
        }
    </script>

    <script>
        let page = document.getElementById("container feedback-form");

        function addBackgroundBlur() {
            page.classList.add("background-blur");
            event.preventDefault();
        }
        function removeBackgroundBlur() {
            page.classList.remove("background-blur");
        }
    </script>

    <script>
        // // make sure that the page is loaded before running anything
        // // need ev always when you use a click event or load event or anything
        // const addInfo = (ev)=>{
        //     ev.preventDefault(); // Stops page from loading automatically, save data
        //     let rate = 0;
        //     // add the rate if statements
        //     const user = {
        //         id: Date.now(), // gives current date
        //         "name": document.getElementById('userName').value,
        //         "email": document.getElementById('email').value,
        //         "feedback": document.getElementById('feedback').value,
        //         "rating": rate
        //     };
        //     let fs = require('fs')
        //     fs.writeFile('feedback.json', data, err => {
        //         if (err) {
        //             console.err;
        //             return;
        //         }
        //         console.log("JSON data is saved.");
        //     });
        //     console.warn('added', user);
        //     document.querySelector('form').reset();
        // }
        // make sure that the page is loaded before running anything
        // document.addEventListener('DOMContentLoaded', ()=>{
        //     document.getElementById('btnsubmit').addEventListener('click', addInfo);
        // })
        // function test(){
        //     const fs = require('fs');
        // }
        // test();

        // function feedbackForm() {
        //     var fs = require('fs');

        //     let rate = 0;

        //     if (rate4.value != null) {
        //         rate = 4;
        //     }

        //     if (rate5.value != null) {
        //         rate = 5;
        //     }

            // if (rate5.value != null) {
            //     rate = 5;
            // }

        //     const finished = (error) => {
        //         if(error){
        //             console.error(error)
        //             return;
        //         }
        //     }
        //     // convert JSON object to string
        //     const data = JSON.stringify(user);
        //     fs.writeFile('feedback.json',jsonData,finished)
        //     // write JSON string to a file
        //     // fs.createFile('feedback.json', data, (err) => {
        //     //     if (err) {
        //     //         throw err;
        //     //     }
        //     //     console.log("JSON data is saved.");
        //     // });
        // }

        // This is how you make java script info into an object
        // const fm = document.querySelector('form')

        // // when the user clicks the submit button
        // fm.addEventListener('submit', (e) => {
        //     // stops the actual website from reloading
        //     e.preventDefault();
        //     // new data payload
        //     const fd = new FormData(fm);
        //     const obj = Object.fromEntries(fd);

        //     const json = JSON.stringify(obj);
        //     localStorage.setItem('form', json);

        //     // send to another html 
        //     window.location.href = "";


        // })
        //     // send to another html 
        //     window.location.href = "";
        // })
    </script>
</body>
</html>


<!--our error with save.js and what we need to do to fix it!!!-->
<!-- fs is a Node.js built-in module. It does things which browsers do not allow JavaScript to do (like access the file system).

If you want to use the fs module then you can't use it directly from the browser. Instead, write a web service in Node.js (the Express.js module is useful here) and access it from the browser using Ajax (e.g. the fetch API). This will deal with the server's file system, not the browser's.

If you want to access files on the user's computer, then you'll need to use <input type="file"> and the FileReader API. -->