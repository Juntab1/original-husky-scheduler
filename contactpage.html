<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Page</title>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
</head>
<link rel="stylesheet" href="contactpagestyle.css">
<body>
    <header>
        <a href="homepage.html">
            <img id="home_button" src="huskyschedulerlogo.jpg" alt="image of Husky Scheduler">
        </a>
    </header>
    <div class="container feedback-form">
        <!--
        <div class="feedback-imge">
            <img src="huskyschedulerlogo.jpg" alt="">
        </div>
        -->
        
        <form method="POST">
            <h3>Drop us your feedback</h3>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <input type="text" id="userName" class="form-control" placeholder="Name">
                    </div>
                    <div class="form-group">
                        <input type="text" id="email" class="form-control" placeholder="Email">
                    </div>
                    <div class="form-group">
                        <p>How would you rate your experience from 1 to 5?</p>
                        1<input type="radio" id="A">
                        2<input type="radio" id="B">
                        3<input type="radio" id="C">
                        4<input type="radio" id="D">
                        5<input type="radio" id="E">
                    </div>
                    <!-- 
                        * Fix the dynamic text box, the user should not be able to manipulate the size of the box
                        * Fix text alignment, the test appears in the middle of the textbox not the front

                     -->
                    <textarea name="txtMsg" id="feedback" class="form-control" placeholder="" style="width: 600px; 
                    height: 150px; margin-bottom: 8px;">
                    </textarea>
                    <div class="form-group">
                        <input type="submit" name="btnsubmit" class="btnFeedback" value="Submit" style="outline: none;" onclick="feedbackForm()">
                    </div>
                </div>
            </div>
        </form>
    </div>
    <script>
        let userName = document.querySelector("#userName");
        let email = document.querySelector("#email");
        let feedback = document.querySelector("#feedback");
        let rate1 = document.querySelector("#A");
        let rate2 = document.querySelector("#B");
        let rate3 = document.querySelector("#C");
        let rate4 = document.querySelector("#D");
        let rate5 = document.querySelector("#E");

        function feedbackForm() {
            // const fs = require('fs');

            let rate = 0;

            if (rate1.value != null) {
                rate = 1;
            }

            if (rate2.value != null) {
                rate = 2;
            }

            if (rate3.value != null) {
                rate = 3;
            }

            if (rate4.value != null) {
                rate = 4;
            }

            if (rate5.value != null) {
                rate = 5;
            }

            // create a JSON object
            const user = {
                "name": userName.value,
                "email": email.value,
                "feedback": feedback.value,
                "rating": rate
            };

            // convert JSON object to string
            const data = JSON.stringify(user);

            // write JSON string to a file
            fs.writeFile('feedback.json', data, (err) => {
                if (err) {
                    throw err;
                }
                console.log("JSON data is saved.");
            });
        }
    </script>
</body>
</html>